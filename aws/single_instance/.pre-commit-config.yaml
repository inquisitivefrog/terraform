---
repos:
  - repo: local
    hooks:
      - id: driftctl-scan
        name: Check drift for dev (us-west-2)
        entry: bash -c 'cd /Users/tim/Documents/workspace/sre/terraform/aws/single_instance/environments/dev && driftctl scan --from tfstate+s3://bluedragon-tfstate-admin-dev/terraform.tfstate --filter "Type != \"aws_route_table\" && Type != \"aws_elasticache_cluster\""'
        language: system
        files: \.(tf|tfstate)$
        pass_filenames: false
        require_serial: true
      - id: driftctl-scan-prod
        name: Check drift for prod (us-west-1)
        entry: bash -c 'cd /Users/tim/Documents/workspace/sre/terraform/aws/single_instance/environments/prod && driftctl scan --from tfstate+s3://bluedragon-tfstate-admin-prod/terraform.tfstate --filter "Type != \"aws_route_table\" && Type != \"aws_elasticache_cluster\""'
        language: system
        files: \.(tf|tfstate)$
        pass_filenames: false
        require_serial: true
      - id: driftctl-scan-usw1
        name: Check drift for dev-usw1 (us-west-1)
        entry: bash -c 'cd /Users/tim/Documents/workspace/sre/terraform/aws/single_instance/environments/dev-usw1 && driftctl scan --from tfstate+s3://bluedragon-tfstate-admin-dev-usw1/terraform.tfstate --filter "Type != \"aws_route_table\" && Type != \"aws_elasticache_cluster\""'
        language: system
        files: \.(tf|tfstate)$
        pass_filenames: false
        require_serial: true
